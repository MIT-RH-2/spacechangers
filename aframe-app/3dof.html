<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>WebVR Checkout Demo</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="WebVR Checkout Demo">
    <meta name="apple-mobile-web-app-capable" />
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.12.3/dist/aframe-extras.min.js"></script>
    <!--build:css css/styles.min.css-->
    <link rel="stylesheet" href="css/styles.css">
    <!-- endbuild -->
    <!--build:js js/main.min.js -->
    <script src="js/aframe-gui.js"></script>
    <script src="js/script.js"></script>
    <!-- endbuild -->
</head>

<body>
    <a-scene physics="debug:false; friction: 0.1; restitution: 0.75" auto-enter-vr>
        <a-assets>
            <img id="6dofThumbnail" alt="6dofThumbnail"  src="assets/roomscale2.png">
            <img id="3dofThumbnail" alt="3dofThumbnail"  src="assets/equirectangular.jpg">
            
            <img id="prod01" alt="prod01" src="assets/product1.png">
            <img id="prod06" alt="prod06" src="assets/product6.png">

            <img id="cart1" alt="cart1" src="assets/cart1.png">
            <img id="cart2" alt="cart1" src="assets/cart2.png">
            <img id="cart3" alt="cart1" src="assets/cart3a.png">
            <img id="cart4" alt="cart1" src="assets/cart4.png">

            <a-mixin id="grid" geometry="primitive:plane; width: 25; height: 25" rotation="-90 0 0" material="src:assets/grid.png; repeat:25 25"></a-mixin>
        </a-assets>

        <a-entity lookAt="[camera]" link="href: index.html; title: Space Mall; image: #6dofThumbnail"
            position="4 1 5"
            rotation="0 40 0 "
        ></a-entity>


        <a-entity
            position="0 0 0"
            rotation="0 50 0"
            >
            <a-gui-icon-button
                height="0.75"
                onclick="showProduct0001"
                icon="ios-pricetags"
                lookAt="[camera]" 
                position="0 1.3 -3.5" 
                scale="0.5 0.5 0.5"
            ></a-gui-icon-button>
            <a-plane
                id="product0001"
                position="0 1.6 -3"
                lookAt="[camera]" 
                height="2"
                width="2"
                material="src:#prod01; transparent:true"
                visible="false"
            >
                <a-gui-icon-button
                    height="0.75"
                    onclick="addProduct0001"
                    icon="ios-cart"
                    lookAt="[camera]" 
                    position="0 -1 0" 
                    scale="0.5 0.5 0.5"
                ></a-gui-icon-button>        
            </a-plane>            
        </a-entity>



        <a-entity
            position="0 0 0"
            rotation="0 -55 0"
            >
            <a-gui-icon-button
                height="0.75"
                onclick="showProduct0006"
                icon="ios-pricetags"
                lookAt="[camera]" 
                position="0 1.6 -3.5" 
                scale="0.5 0.5 0.5"
            ></a-gui-icon-button>
            <a-plane
                id="product0006"
                position="0 1.6 -3"
                lookAt="[camera]" 
                height="2"
                width="2"
                material="src:#prod06; transparent:true"
                visible="false"
            >
                <a-gui-icon-button
                    height="0.75"
                    onclick="addProduct0006"
                    icon="ios-cart"
                    lookAt="[camera]" 
                    position="0 -1 0" 
                    scale="0.5 0.5 0.5"
                ></a-gui-icon-button>        
            </a-plane>            
        </a-entity>

        <!-- Grid -->
        <a-sky material="src:#3dofThumbnail; color:#fff"></a-sky>

        <!-- Camera + cursor. -->
        <a-entity camera="userHeight: 1.6"
            universal-controls="movementControls: checkpoint"
            checkpoint-controls="mode: animate"
            look-controls=""
            wasd-controls>
            <a-gui-cursor id="cursor"
                raycaster="interval: 1000; objects: [gui-interactable], [link]"
                fuse="false" fuseTimeout="2000"
                design="dot"
            >
            </a-gui-cursor> <!-- /cursor -->
        </a-entity> <!-- /camera -->

        <a-entity checkout="pitch: -0.7;"></a-entity>

        <a-entity checkoutmenu id="checkoutmenu" visible="false"
        >
            <a-plane id="slide1"
                visible="true"
                position="0 2.5 -1.25"
                height="1.5"
                width="1"
                color="white"
                material="src:#cart1;"
            ></a-plane> 
            <a-plane id="slide2"
                visible="false"
                position="0 2.5 -1.25"
                height="1.5"
                width="1"
                color="white"
                material="src:#cart2;"
            ></a-plane> 
            <a-plane id="slide3"
                visible="false"
                position="0 2.5 -1.25"
                height="1.5"
                width="1"
                color="white"
                material="src:#cart3;"
            ></a-plane> 
            <a-plane id="slide4"
                visible="false"
                position="0 2.5 -1.25"
                height="1.5"
                width="1"
                color="white"
                material="src:#cart4;"
            ></a-plane> 

        </a-entity>

    </a-scene>
</body>
<script type="text/javascript">
    

window.showProduct0001 = function() {
    var product0001 = document.getElementById("product0001");
    product0001.setAttribute('visible','true');
}

window.addProduct0001 = function() {
    var product0001 = document.getElementById("product0001");
    product0001.setAttribute('visible','false');
}

window.showProduct0006 = function() {
    var product0006 = document.getElementById("product0006");
    product0006.setAttribute('visible','true');
}

window.addProduct0006 = function() {
    var product0006 = document.getElementById("product0006");
    product0006.setAttribute('visible','false');
}

window.checkout = function() {
    var menu = document.getElementById("checkoutMenu");
    menu.setAttribute('visible','true');
}

let current_slide_number = 0;
let number_of_slides = 4;
window.increment_slide = function(){
    current_slide_number = (current_slide_number + 1) % number_of_slides;
    window.show_slide(current_slide_number+1);
}
window.show_slide = function(slide_number){
    // Hide all of the slides
    for(let i = 1; i<=number_of_slides; i++){
        document.getElementById("slide"+i).setAttribute('visible','false');
    }
    // Show the one slide
    document.getElementById("slide"+slide_number).setAttribute('visible','true');
}


</script>
</html>